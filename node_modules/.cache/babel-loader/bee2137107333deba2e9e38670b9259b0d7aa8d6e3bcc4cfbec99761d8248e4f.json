{"ast":null,"code":"var _jsxFileName = \"/root/tesis/gps/src/components/Map/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport * as turf from '@turf/turf';\nimport 'leaflet/dist/leaflet.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Map() {\n  _s();\n  const mapRef = useRef(null);\n  const [mapStyle, setMapStyle] = useState('dark');\n  const mapInstanceRef = useRef(null);\n  const layerGroupRef = useRef(null);\n  useEffect(() => {\n    // Jakarta coordinates\n    const jakartaCoords = [-6.2088, 106.8456];\n\n    // Tile layer options\n    const tileLayers = {\n      dark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n        subdomains: 'abcd',\n        maxZoom: 20\n      }),\n      vector: L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png', {\n        attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        subdomains: 'abcd',\n        minZoom: 0,\n        maxZoom: 20\n      }),\n      vectorial: L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {\n        maxZoom: 20,\n        attribution: '&copy; OpenStreetMap France | &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      })\n    };\n    if (!mapInstanceRef.current) {\n      // Initialize the map if it doesn't exist\n      mapInstanceRef.current = L.map(mapRef.current, {\n        center: jakartaCoords,\n        zoom: 11,\n        zoomControl: false,\n        layers: [tileLayers[mapStyle]] // Set initial layer\n      });\n\n      // Add zoom control to a custom position\n      L.control.zoom({\n        position: 'topright'\n      }).addTo(mapInstanceRef.current);\n\n      // Add layer control\n      L.control.layers({\n        'Dark': tileLayers.dark,\n        'Vector': tileLayers.vector,\n        'Vectorial': tileLayers.vectorial\n      }, null, {\n        position: 'bottomright'\n      }).addTo(mapInstanceRef.current);\n\n      // Create a layer group for other map elements\n      layerGroupRef.current = L.layerGroup().addTo(mapInstanceRef.current);\n    }\n\n    // Clear existing layers\n    layerGroupRef.current.clearLayers();\n\n    // Create a circle around Jakarta using Turf.js\n    const center = turf.point(jakartaCoords);\n    const radius = 10; // 10 km radius\n    const options = {\n      steps: 64,\n      units: 'kilometers'\n    };\n    const circle = turf.circle(center, radius, options);\n\n    // Convert Turf circle to Leaflet layer and add to layer group\n    L.geoJSON(circle, {\n      style: {\n        color: mapStyle === 'dark' ? '#ffffff' : '#000000',\n        weight: 2,\n        opacity: 0.7,\n        fillOpacity: 0.1\n      }\n    }).addTo(layerGroupRef.current);\n\n    // Add a marker for Jakarta city center\n    L.marker(jakartaCoords).addTo(layerGroupRef.current).bindPopup('Jakarta City Center').openPopup();\n\n    // Update the tile layer\n    mapInstanceRef.current.eachLayer(layer => {\n      if (layer instanceof L.TileLayer) {\n        mapInstanceRef.current.removeLayer(layer);\n      }\n    });\n    tileLayers[mapStyle].addTo(mapInstanceRef.current);\n\n    // Cleanup function\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, [mapStyle]);\n  const changeMapStyle = style => {\n    setMapStyle(style);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: \"map-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-style-control\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => changeMapStyle('dark'),\n        children: \"Dark\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => changeMapStyle('vector'),\n        children: \"Vector\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => changeMapStyle('vectorial'),\n        children: \"Vectorial\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Map, \"ckCxXSW9fsGQ5EQCDmWbgmQmM60=\");\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","useState","L","turf","jsxDEV","_jsxDEV","Fragment","_Fragment","Map","_s","mapRef","mapStyle","setMapStyle","mapInstanceRef","layerGroupRef","jakartaCoords","tileLayers","dark","tileLayer","attribution","subdomains","maxZoom","vector","minZoom","vectorial","current","map","center","zoom","zoomControl","layers","control","position","addTo","layerGroup","clearLayers","point","radius","options","steps","units","circle","geoJSON","style","color","weight","opacity","fillOpacity","marker","bindPopup","openPopup","eachLayer","layer","TileLayer","removeLayer","remove","changeMapStyle","children","ref","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/root/tesis/gps/src/components/Map/Map.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport * as turf from '@turf/turf';\nimport 'leaflet/dist/leaflet.css';\n\nfunction Map() {\n  const mapRef = useRef(null);\n  const [mapStyle, setMapStyle] = useState('dark');\n  const mapInstanceRef = useRef(null);\n  const layerGroupRef = useRef(null);\n\n  useEffect(() => {\n    // Jakarta coordinates\n    const jakartaCoords = [-6.2088, 106.8456];\n\n    // Tile layer options\n    const tileLayers = {\n      dark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n        subdomains: 'abcd',\n        maxZoom: 20\n      }),\n      vector: L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png', {\n        attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        subdomains: 'abcd',\n        minZoom: 0,\n        maxZoom: 20\n      }),\n      vectorial: L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {\n        maxZoom: 20,\n        attribution: '&copy; OpenStreetMap France | &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      })\n    };\n\n    if (!mapInstanceRef.current) {\n      // Initialize the map if it doesn't exist\n      mapInstanceRef.current = L.map(mapRef.current, {\n        center: jakartaCoords,\n        zoom: 11,\n        zoomControl: false,\n        layers: [tileLayers[mapStyle]] // Set initial layer\n      });\n\n      // Add zoom control to a custom position\n      L.control.zoom({\n        position: 'topright'\n      }).addTo(mapInstanceRef.current);\n\n      // Add layer control\n      L.control.layers({\n        'Dark': tileLayers.dark,\n        'Vector': tileLayers.vector,\n        'Vectorial': tileLayers.vectorial\n      }, null, { position: 'bottomright' }).addTo(mapInstanceRef.current);\n\n      // Create a layer group for other map elements\n      layerGroupRef.current = L.layerGroup().addTo(mapInstanceRef.current);\n    }\n\n    // Clear existing layers\n    layerGroupRef.current.clearLayers();\n\n    // Create a circle around Jakarta using Turf.js\n    const center = turf.point(jakartaCoords);\n    const radius = 10; // 10 km radius\n    const options = { steps: 64, units: 'kilometers' };\n    const circle = turf.circle(center, radius, options);\n\n    // Convert Turf circle to Leaflet layer and add to layer group\n    L.geoJSON(circle, {\n      style: {\n        color: mapStyle === 'dark' ? '#ffffff' : '#000000',\n        weight: 2,\n        opacity: 0.7,\n        fillOpacity: 0.1\n      }\n    }).addTo(layerGroupRef.current);\n\n    // Add a marker for Jakarta city center\n    L.marker(jakartaCoords).addTo(layerGroupRef.current)\n      .bindPopup('Jakarta City Center')\n      .openPopup();\n\n    // Update the tile layer\n    mapInstanceRef.current.eachLayer(layer => {\n      if (layer instanceof L.TileLayer) {\n        mapInstanceRef.current.removeLayer(layer);\n      }\n    });\n    tileLayers[mapStyle].addTo(mapInstanceRef.current);\n\n    // Cleanup function\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, [mapStyle]);\n\n  const changeMapStyle = (style) => {\n    setMapStyle(style);\n  };\n\n  return (\n    <>\n      <div ref={mapRef} className=\"map-container\" />\n      <div className=\"map-style-control\">\n        <button onClick={() => changeMapStyle('dark')}>Dark</button>\n        <button onClick={() => changeMapStyle('vector')}>Vector</button>\n        <button onClick={() => changeMapStyle('vectorial')}>Vectorial</button>\n      </div>\n    </>\n  );\n}\n\nexport default Map;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,KAAKC,IAAI,MAAM,YAAY;AAClC,OAAO,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAElC,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAMC,MAAM,GAAGV,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,MAAM,CAAC;EAChD,MAAMY,cAAc,GAAGb,MAAM,CAAC,IAAI,CAAC;EACnC,MAAMc,aAAa,GAAGd,MAAM,CAAC,IAAI,CAAC;EAElCD,SAAS,CAAC,MAAM;IACd;IACA,MAAMgB,aAAa,GAAG,CAAC,CAAC,MAAM,EAAE,QAAQ,CAAC;;IAEzC;IACA,MAAMC,UAAU,GAAG;MACjBC,IAAI,EAAEf,CAAC,CAACgB,SAAS,CAAC,+DAA+D,EAAE;QACjFC,WAAW,EAAE,mJAAmJ;QAChKC,UAAU,EAAE,MAAM;QAClBC,OAAO,EAAE;MACX,CAAC,CAAC;MACFC,MAAM,EAAEpB,CAAC,CAACgB,SAAS,CAAC,oEAAoE,EAAE;QACxFC,WAAW,EAAE,yOAAyO;QACtPC,UAAU,EAAE,MAAM;QAClBG,OAAO,EAAE,CAAC;QACVF,OAAO,EAAE;MACX,CAAC,CAAC;MACFG,SAAS,EAAEtB,CAAC,CAACgB,SAAS,CAAC,yDAAyD,EAAE;QAChFG,OAAO,EAAE,EAAE;QACXF,WAAW,EAAE;MACf,CAAC;IACH,CAAC;IAED,IAAI,CAACN,cAAc,CAACY,OAAO,EAAE;MAC3B;MACAZ,cAAc,CAACY,OAAO,GAAGvB,CAAC,CAACwB,GAAG,CAAChB,MAAM,CAACe,OAAO,EAAE;QAC7CE,MAAM,EAAEZ,aAAa;QACrBa,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,KAAK;QAClBC,MAAM,EAAE,CAACd,UAAU,CAACL,QAAQ,CAAC,CAAC,CAAC;MACjC,CAAC,CAAC;;MAEF;MACAT,CAAC,CAAC6B,OAAO,CAACH,IAAI,CAAC;QACbI,QAAQ,EAAE;MACZ,CAAC,CAAC,CAACC,KAAK,CAACpB,cAAc,CAACY,OAAO,CAAC;;MAEhC;MACAvB,CAAC,CAAC6B,OAAO,CAACD,MAAM,CAAC;QACf,MAAM,EAAEd,UAAU,CAACC,IAAI;QACvB,QAAQ,EAAED,UAAU,CAACM,MAAM;QAC3B,WAAW,EAAEN,UAAU,CAACQ;MAC1B,CAAC,EAAE,IAAI,EAAE;QAAEQ,QAAQ,EAAE;MAAc,CAAC,CAAC,CAACC,KAAK,CAACpB,cAAc,CAACY,OAAO,CAAC;;MAEnE;MACAX,aAAa,CAACW,OAAO,GAAGvB,CAAC,CAACgC,UAAU,CAAC,CAAC,CAACD,KAAK,CAACpB,cAAc,CAACY,OAAO,CAAC;IACtE;;IAEA;IACAX,aAAa,CAACW,OAAO,CAACU,WAAW,CAAC,CAAC;;IAEnC;IACA,MAAMR,MAAM,GAAGxB,IAAI,CAACiC,KAAK,CAACrB,aAAa,CAAC;IACxC,MAAMsB,MAAM,GAAG,EAAE,CAAC,CAAC;IACnB,MAAMC,OAAO,GAAG;MAAEC,KAAK,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAa,CAAC;IAClD,MAAMC,MAAM,GAAGtC,IAAI,CAACsC,MAAM,CAACd,MAAM,EAAEU,MAAM,EAAEC,OAAO,CAAC;;IAEnD;IACApC,CAAC,CAACwC,OAAO,CAACD,MAAM,EAAE;MAChBE,KAAK,EAAE;QACLC,KAAK,EAAEjC,QAAQ,KAAK,MAAM,GAAG,SAAS,GAAG,SAAS;QAClDkC,MAAM,EAAE,CAAC;QACTC,OAAO,EAAE,GAAG;QACZC,WAAW,EAAE;MACf;IACF,CAAC,CAAC,CAACd,KAAK,CAACnB,aAAa,CAACW,OAAO,CAAC;;IAE/B;IACAvB,CAAC,CAAC8C,MAAM,CAACjC,aAAa,CAAC,CAACkB,KAAK,CAACnB,aAAa,CAACW,OAAO,CAAC,CACjDwB,SAAS,CAAC,qBAAqB,CAAC,CAChCC,SAAS,CAAC,CAAC;;IAEd;IACArC,cAAc,CAACY,OAAO,CAAC0B,SAAS,CAACC,KAAK,IAAI;MACxC,IAAIA,KAAK,YAAYlD,CAAC,CAACmD,SAAS,EAAE;QAChCxC,cAAc,CAACY,OAAO,CAAC6B,WAAW,CAACF,KAAK,CAAC;MAC3C;IACF,CAAC,CAAC;IACFpC,UAAU,CAACL,QAAQ,CAAC,CAACsB,KAAK,CAACpB,cAAc,CAACY,OAAO,CAAC;;IAElD;IACA,OAAO,MAAM;MACX,IAAIZ,cAAc,CAACY,OAAO,EAAE;QAC1BZ,cAAc,CAACY,OAAO,CAAC8B,MAAM,CAAC,CAAC;QAC/B1C,cAAc,CAACY,OAAO,GAAG,IAAI;MAC/B;IACF,CAAC;EACH,CAAC,EAAE,CAACd,QAAQ,CAAC,CAAC;EAEd,MAAM6C,cAAc,GAAIb,KAAK,IAAK;IAChC/B,WAAW,CAAC+B,KAAK,CAAC;EACpB,CAAC;EAED,oBACEtC,OAAA,CAAAE,SAAA;IAAAkD,QAAA,gBACEpD,OAAA;MAAKqD,GAAG,EAAEhD,MAAO;MAACiD,SAAS,EAAC;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC9C1D,OAAA;MAAKsD,SAAS,EAAC,mBAAmB;MAAAF,QAAA,gBAChCpD,OAAA;QAAQ2D,OAAO,EAAEA,CAAA,KAAMR,cAAc,CAAC,MAAM,CAAE;QAAAC,QAAA,EAAC;MAAI;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC5D1D,OAAA;QAAQ2D,OAAO,EAAEA,CAAA,KAAMR,cAAc,CAAC,QAAQ,CAAE;QAAAC,QAAA,EAAC;MAAM;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAChE1D,OAAA;QAAQ2D,OAAO,EAAEA,CAAA,KAAMR,cAAc,CAAC,WAAW,CAAE;QAAAC,QAAA,EAAC;MAAS;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnE,CAAC;EAAA,eACN,CAAC;AAEP;AAACtD,EAAA,CA7GQD,GAAG;AAAAyD,EAAA,GAAHzD,GAAG;AA+GZ,eAAeA,GAAG;AAAC,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}